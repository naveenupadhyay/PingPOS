define("header/header-account",["jquery","backbone","common/customer/customer"],function(a,b,c){var d=b.View.extend({el:".js-header-login",events:{"click .js-sign-out":"_signOutCustomer"},initialize:function(){this.$accountLoggedIn=this.$(".js-account-logged-in"),this.$accountFlyoutLoggedInMenu=this.$(".js-account-flyout-logged-in"),this.$accountFlyoutLoggedOutMenu=this.$(".js-account-flyout-logged-out"),this._setLoginHeaderStatus()},_setLoginHeaderStatus:function(){this.$accountLoggedIn.hasClass("active")&&(this.$accountFlyoutLoggedInMenu.addClass("active"),this.$accountFlyoutLoggedInMenu.find("span").addClass("active"),this.$accountFlyoutLoggedOutMenu.removeClass("active"),this.$accountFlyoutLoggedOutMenu.find("span").removeClass("active"))},_signOutCustomer:function(){c.clear()}});return d}),define("common/plugins/menu-navigator",["jquery","underscore"],function(a,b){function c(b,c){this.options=a.extend({},f,c),this.$el=a(b),this.$items=this.$el.find(this.options.itemsSelector),this.$items.length||a.error("MenuNavigator initialized with 0 items"),this.matrix=null,this.eventKeydown="keydown",this.options.eventNamespace&&(this.eventKeydown+="."+this.options.eventNamespace),this.init()}var d={enter:13,space:32,left:37,up:38,right:39,down:40},e=b.map(d,function(a){return a}),f={itemsSelector:"button",itemsInVerticalOrder:!0,eventNamespace:"",typeahead:!1};return c.prototype={constructor:c,init:function(){b.bindAll(this,"_handleKeyDown","_removeHandler","_getCurrentIndex","_setNewItem","_deactiveItems","_destroy","_buildMatrix","_navigate"),this.matrix=this._buildMatrix(),this.rowNum=this.options.itemsInVerticalOrder?this.matrix[0].length:this.matrix.length,this.colNum=this.options.itemsInVerticalOrder?this.matrix.length:this.matrix[0].length,this._addHandlers()},_addHandlers:function(){a(document).on(this.eventKeydown,this._handleKeyDown)},_removeHandler:function(){a(document).off(this.eventKeydown)},_destroy:function(){this._removeHandler(),this._deactiveItems(),this.$el.data("menuNavigator",null)},_handleKeyDown:function(a){var b=new RegExp("("+e.join("|")+")");if(b.test(a.which))switch(a.preventDefault(),a.which){case d.up:this._navigate(0,-1);break;case d.down:this._navigate(0,1);break;case d.left:this.colNum>1&&this._navigate(-1,0);break;case d.right:this.colNum>1&&this._navigate(1,0);break;case d.enter:case d.space:this.options.typeahead||this.$items.eq(this._getCurrentIndex()).trigger("click")}},_buildMatrix:function(){var c,d,e=0,f=[],g=[],h=this.options.itemsInVerticalOrder?"left":"top";return this.$items.each(function(i,j){var k=a(j);b.isUndefined(k.attr("tabindex"))&&k.attr("tabindex",-1),d=Math.round(k.position()[h]),b.isUndefined(c)&&(c=d),d===c?g.push(j):(f[e]=g,e++,g=[],g.push(j),c=d)}),f[e]=g,f},_navigate:function(a,b){var c,d=this._getCurrentIndex();if(-1===d)c=0;else{if(c=d+a*this.rowNum+b,0>c||c>this.$items.length-1)return;this._deactiveItems()}this._setNewItem(c)},_setNewItem:function(a){b.isNumber(a)&&a>=0&&this.$items.eq(a).addClass("active").trigger("focus")},_deactiveItems:function(){this.$items.removeClass("active")},_getCurrentIndex:function(){var a=this.$items.index(this.$items.filter(".active"));return a}},a.fn.menuNavigator=function(d){return this.each(function(){var e=a(this),f=e.data("menuNavigator");f||e.data("menuNavigator",new c(this,d)),b.isString(d)&&"destroy"===d&&f._destroy.call(e)})},a.fn.menuNavigator.Constructor=c,a}),define("common/plugins/flyout",["jquery","underscore","common/utils/touch","common/plugins/menu-navigator"],function(a,b,c){function d(a){return{right:"left",left:"right",top:"bottom",bottom:"top"}[a]}function e(a){return a.right-a.left}function f(a){return a.bottom-a.top}function g(a){return{width:e(a),height:f(a)}}function h(a,c,d){function e(a,b){var e,f,g={};return e=Math.max(c[a],d[a]),f=Math.min(c[b]+(e-c[a]),d[b]),e=Math.max(c[a]+(f-c[b]),d[a]),g[a]=e,g[b]=f,g}a=b.extend({direction:"left"},a);var f={};b.extend(f,e("left","right")),b.extend(f,e("top","bottom"));var h=g(f),i=g(c);return{overflow:h.width<i.width||h.height<i.height,weight:Math.max(i.width-h.width,i.height-h.height),top:f.top-c.top,left:f.left-c.left,direction:a.direction}}function i(a,b){var c=a.bottom-a.top,d=a.right-a.left,e=b.bottom-b.top,f=b.right-b.left;return{left:f/2-d/2,top:e/2-c/2}}function j(a,c,e){var f={top:1,left:1,bottom:-1,right:-1},g=d(e);return b.reduce(o,function(a,b){return b!==g&&(a[b]+=c*f[b]),a},b.clone(a))}function k(a){if("left"===a||"right"===a)return"x";if("top"===a||"bottom"===a)return"y";throw new TypeError}function l(a){return a.length?l(a.get(0)):b.extend({},a.getBoundingClientRect())}function m(a){function c(a){return e?a.hasClass(e):b.contains(["auto","hidden","scroll"],a.css("overflow"))}function d(a){return a.is("body")||!a.parent()}for(var e=a.data("flyout-parent-class");a&&a.length;){if(c(a)||d(a))return a;a=a.parent()}}var n=function(a){return a()},o=["left","right","top","bottom"],p=b.map(o,function(a){return"flyout-"+a}),q={center:i},r=function(e,f){return this.each(function(){function g(a){a=b.extend({gravity:"center",direction:"left"},a);var c=m(B);b.forEach(p,function(a){B.removeClass(a)}),B.addClass("flyout-"+a.direction);var e=k(a.direction),f=q[a.gravity],g=f(l(v),l(x));"x"===e?v.css("left","").css("top",g.top+"px"):"y"===e&&v.css("top","").css("left",g.left+"px");var i=l(v),n=l(c),o=parseInt(B.data("magicPadding"),10);!b.isNaN(o)&&o>0&&(n=j(n,o,a.direction)),n[d(a.direction)]=l(x)[a.direction];var r=h(a,i,n),s=v.position();return r.left+=s.left,r.top+=s.top,r}function s(a){var c,d=k(a.direction);b.forEach(p,function(a){B.removeClass(a)}),B.addClass("flyout-"+a.direction),"x"===d?(v.css("left","").css("top",a.top+"px"),c=i(l(w),l(x)),w.css("left","").css("top",-a.top+c.top+"px")):"y"===d&&(v.css("top","").css("left",a.left+"px"),c=i(l(w),l(x)),w.css("top","").css("left",-a.left+c.left+"px"))}function t(){var a=o,c=B.data("initialDirection"),d=b.map(o,function(a){return g({direction:a})}),e=b.sortBy(d,function(b){return b.overflow?b.weight:b.direction===c?-1/0:-(a.length-a.indexOf(b.direction))});s(e[0])}var u,v,w,x,y,z,A,B=a(this);if(f=f||{},f.allowNested?(u=B.find("> .js-flyout-toggle"),v=B.find("> .js-flyout-modal"),w=v.find("> .js-flyout-caret"),y=v.find("> .js-flyout-close")):(u=B.find(".js-flyout-toggle"),v=B.find(".js-flyout-modal"),w=v.find(".js-flyout-caret"),y=v.find(".js-flyout-close")),x=B.data("anchor"),B.data("magic")){B.addClass("flyout-magic"),w.length||(w=a("<div class='js-flyout-caret flyout-caret'></div>").prependTo(v));var C=(B.attr("class")||"").match(/\bflyout-(top|bottom|left|right)\b/);C&&B.data("magicRespectInitialDirection")&&B.data("initialDirection",C[1])}var D=function(b){var c=0===B.find(b.target).addBack(b.target).length;c&&(a(document).off(".flyout",D),B.flyout("hide"))},E=function(){if(B.data("magic"))t();else{var a={};(B.hasClass("flyout-right")||B.hasClass("flyout-left"))&&(a["margin-top"]=Math.round(-v.outerHeight()/2)),B.hasClass("flyout-fluid")&&(a["margin-left"]=Math.round(-v.outerWidth()/2)),v.css(a)}};if(b.isString(e))f=b.extend({noAnimation:!1},f),"position"===e&&B.hasClass("active")&&E(),"show"!==e||B.hasClass("active")?"off"===e?(B.flyout("hide"),u.off(".flyout"),v.off(".flyout"),B.off("mouseleave.flyout"),a(document).off(".flyout",D).off("keydown.flyout")):"hide"===e&&(B.hasClass("active")&&(B.removeClass("active").trigger("hidden"),u.attr("aria-expanded","false")),B.data("enableMenuNavigator")&&v.data("menuNavigator")&&v.menuNavigator("destroy"),v.off(".flyout")):(B.toggleClass("no-animation",f.noAnimation).addClass("active").trigger("shown",[B]),u.attr("aria-expanded","true"),E(),B.data("persistent")||(z=B.data("defer")?b.defer:n,z(function(){a(document).on("click.flyout touchstart.flyout",D)}),B.data("closeOnEsc")&&a(document).on("keydown.flyout",function(a){var b=27;a.which===b&&B.flyout("hide")})));else{if(f=b.extend({persistent:!1,hover:!1,defer:!1,enableMenuNavigator:!1,closeOnEsc:!0,autoShow:!1,adaptTextAutoComplete:!1,disableTouchLinksOnly:!1,anchor:u,magic:!1,magicRespectInitialDirection:!0,magicPadding:6},e),B.data(f),u.attr("aria-expanded","false"),c.ieTouchFix(u,function(){B.trigger("click")}),u.on("click.flyout touchstart.flyout",function(a){a.preventDefault(),a.target&&a.target.href&&f.disableTouchLinksOnly&&!c.isTouch()&&r._navigateWindow(a.target.href),B.hasClass("active")?B.flyout("hide"):(B.flyout("show"),f.enableMenuNavigator&&v.menuNavigator({eventNamespace:"flyout"}))}),f.hover){A=a("<div class='flyout-backdrop' />"),B.prepend(A);var F;v.attr("id")?F=v.attr("id"):(F=b.uniqueId("flyout"),v.attr("id",F)),u.attr("aria-describedby",F),u.on("mouseenter.flyout",function(){B.flyout("show")}),c.isTouch()&&u.on("click.flyout touchstart.flyout",function(){B.flyout("show")}),B.on("mouseleave.flyout",function(b){f.adaptTextAutoComplete?a(b.target).is("input")||B.flyout("hide"):B.flyout("hide")})}f.autoShow!==!1&&setTimeout(function(){B.flyout("show")},f.autoShow),y.on("click.flyout touchstart.flyout",function(a){a.preventDefault(),B.flyout("hide")})}})};return r._navigateWindow=function(a){window.location=a},a.fn.flyout=r,a}),define("header/header-dropdown",["jquery","underscore","backbone","common/utils/touch","common/utils/vent","common/plugins/flyout"],function(a,b,c,d,e){var f=250,g="/search",h=c.View.extend({el:".js-searchbar",events:{"shown .js-flyout":"_toggleSelected","hidden .js-flyout":"_toggleSelected","click .js-flyout-modal button":"_setSelection"},initialize:function(){this.$searchbarSelect=this.$(".js-searchbar-select"),this.$flyout=this.$searchbarSelect.find(".js-flyout"),this.$flyoutToggle=this.$flyout.find(".js-flyout-toggle"),this.$flyoutModal=this.$flyout.find(".js-flyout-modal"),this.$inputSearch=this.$(".js-searchbar-input"),b.bindAll(this,"_hideFlyout","_checkHover","_updateToggle"),this.$flyout.flyout({enableMenuNavigator:!0}),this._getPathBase()===g&&this.listenTo(e,"header:updateDropdown",this._updateToggle)},_toggleSelected:function(b){this.$searchbarSelect.toggleClass("selected"),a(this._getWindow()).one("scroll",this._hideFlyout),d.isTouch()||"shown"!==b.type||(this.$flyoutToggle.on("mouseleave",this._checkHover),this.$flyoutModal.on("mouseleave",this._checkHover))},_setSelection:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.text(),e=c.data("cat-id");this._updateToggle(d,e),this.$inputSearch.focus(),this._hideFlyout()},_updateToggle:function(a,b){this.$flyoutToggle.data("cat-id",b).data("cat-name",a).text(a)},_hideFlyout:function(){this.$flyout.flyout("hide")},_checkHover:function(){var a=this,c=!1;this.$flyoutModal.one("mouseenter",function(){c=!0}),this.$flyoutToggle.one("mouseenter",function(){c=!0}),b.delay(function(){c||a._hideFlyout()},f)},_getPathBase:function(){return window._WML.PATH_BASE},_getWindow:function(){return window}});return h}),define("common/utils/transition",["jquery","underscore"],function(a,b){var c={cssTransition:function(){var a=document.createElement("fakeElement"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return{end:"noTransitionEnd"}},cssAnimation:function(){var a=document.createElement("fakeElement"),b={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",MSAnimation:"MSAnimationEnd",animation:"animationend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return{end:"noAnimationEnd"}},emulateTransitionEnd:function(b,c){var d=this,e=a(b),f=!1;if(0!==e.length){e.one(this.cssTransition().end,function(){f=!0});var g=function(){f||e.trigger(d.cssTransition().end)};setTimeout(g,c)}},_getNewHeight:function(a){var b;return a.toggleClass("expanded"),b=a.height(),a.toggleClass("expanded"),b},expand:function(c,d){d=d||{};var e=a(c),f=d.duration||400,g=this._getNewHeight(e);0!==e.length&&(e.one(this.cssTransition().end,b.bind(function(){e.removeClass("animating").css("height",""),b.isFunction(d.transitionEnd)&&b.defer(d.transitionEnd)},this)),this.emulateTransitionEnd(e,f),e.addClass("animating"),e.height(g),e.addClass("expanded"))},collapse:function(c,d){d=d||{};var e=a(c),f=d.duration||400,g=d.height||0,h=this;0!==e.length&&(e.one(this.cssTransition().end,b.bind(function(){e.removeClass("animating expanded").css("height",""),b.isFunction(d.transitionEnd)&&b.defer(d.transitionEnd)},this)),e.height(e.height()),h.emulateTransitionEnd(e,f),b.defer(function(){e.addClass("animating"),e.height(g)}))},redraw:function(b){a(b).each(function(){this.offsetHeight})}};return c}),define("common/plugins/sticky",["jquery","underscore"],function(a,b){var c=function(d,e){return this.each(function(){var f,g,h,i,j=c._getEl(this),k={scrollPast:!1,horizontalScroll:!1,wrapEl:!1,offset:0,closeAnimationClass:null,closeAnimationDuration:300},l=b.extend(k,b.isObject(d)?d:{}),m=function(){"string"==typeof d&&(h=d),"off"===h?a(window).off("scroll.sticky"):(l.wrapEl&&n(),a(window).on("scroll.sticky",function(){o(),l.horizontalScroll&&q()}),o())},n=function(){i=j.wrap(function(){return a("<div class='fixed-wrapper' />").height(j.outerHeight())}).parent()},o=function(){var a=j.data("disableSticky");if(!a){var d=c._getScrollTop();d+l.offset>p()?j.hasClass("fixed")||j.addClass("fixed").trigger("sticky:on"):j.hasClass("fixed")&&(l.closeAnimationClass?r():j.removeClass("fixed").trigger("sticky:off")),b.isFunction(e)&&e(d)}},p=function(){return i?f=l.scrollPast?i.offset().top+i.height():i.offset().top:f||(f=l.scrollPast?j.offset().top+j.height():j.offset().top),f},q=function(){var a=j.data("disableSticky");a||(g=c._getScrollLeft(),g>0&&j.hasClass("fixed")?j.css({left:"-"+g+"px"}):j.removeAttr("style"))},r=function(){j.addClass(l.closeAnimationClass),window.setTimeout(function(){j.removeClass("fixed "+l.closeAnimationClass).trigger("sticky:off")},l.closeAnimationDuration)};m()})};return c._getEl=function(b){return a(b)},c._getScrollTop=function(){return a(window).scrollTop()},c._getScrollLeft=function(){return a(window).scrollLeft()},a.fn.sticky=c,a}),define("header/header-sticky",["jquery","underscore","common/utils/transition","common/utils/breakpoint-class-switcher","common/breakpoints","common/plugins/sticky"],function(a,b,c,d,e){var f=100,g=4e3,h=function(){this.$jsHeader=a(".js-header"),this.$jsHeader.data("stickyHeader")===!1||this._isMobileViewport()?this.$jsHeader.data("disableSticky",!0):this.$jsHeader.data("disableSticky",null);var d=this;this.stickyAd(),this.$jsHeader.sticky({scrollPast:!0,horizontalScroll:!0}).on("sticky:off",function(){c.redraw(d.$jsHeader)}),a(this._getWindow()).on("resize.headerSticky",b.debounce(function(){d.resizeHeaderSticky()},f))};return h.prototype.resizeHeaderSticky=function(){this.$jsHeader.data("stickyHeader")!==!1&&(this._isMobileViewport()?(this.$jsHeader.data("disableSticky",!0),this.$jsHeader.removeClass("fixed")):(this.$jsHeader.data("disableSticky",null),a(this._getWindow()).trigger("scroll.sticky")))},h.prototype.stickyAd=function(){var d=a(".js-sponsored-container-top"),e=!0;d.length&&(this.$jsHeader.one("sticky:on",function(){b.delay(function(){d.hasClass("fixed")&&(Modernizr.cssanimations?(d.addClass("close"),d.one(c.cssAnimation().end,function(){d.removeClass("fixed close")})):d.removeClass("fixed")),e=!1},g)}),this.$jsHeader.on("sticky:on",function(){e&&d.addClass("fixed")}),this.$jsHeader.on("sticky:off",function(){e&&d.removeClass("fixed close")}))},h.prototype._isMobileViewport=function(){return d.getCurrentBreakpoint()<e.l},h.prototype._getWindow=function(){return window},h}),define("header/header-logo-shipping-pass",["jquery","common/shipping-pass-participation-level-service"],function(a,b){var c={init:function(){var c=a(".js-logo"),d=b.call();d.done(function(a){a&&a.subscribed&&c.addClass("logo-header-shipping-pass")})}};return c}),function(a){define("jquery.menu-aim",["jquery"],function(){return function(){return function(a){function b(b){var c=a(this),d=null,e=[],f=null,g=null,h=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop},b),i=3,j=300,k=function(a){e.push({x:a.pageX,y:a.pageY}),e.length>i&&e.shift()},l=function(){g&&clearTimeout(g),h.exitMenu(this)&&(d&&h.deactivate(d),d=null)},m=function(){g&&clearTimeout(g),h.enter(this),q(this)},n=function(){h.exit(this)},o=function(){p(this)},p=function(a){a!=d&&(d&&h.deactivate(d),h.activate(a),d=a)},q=function(a){var b=r();b?g=setTimeout(function(){q(a)},b):p(a)},r=function(){function b(a,b){return(b.y-a.y)/(b.x-a.x)}if(!d||!a(d).is(h.submenuSelector))return 0;var g=c.offset(),i={x:g.left,y:g.top-h.tolerance},k={x:g.left+c.outerWidth(),y:i.y},l={x:g.left,y:g.top+c.outerHeight()+h.tolerance},m={x:g.left+c.outerWidth(),y:l.y},n=e[e.length-1],o=e[0];if(!n)return 0;if(o||(o=n),o.x<g.left||o.x>m.x||o.y<g.top||o.y>m.y)return 0;if(f&&n.x==f.x&&n.y==f.y)return 0;var p=k,q=m;"left"==h.submenuDirection?(p=l,q=i):"below"==h.submenuDirection?(p=m,q=l):"above"==h.submenuDirection&&(p=i,q=k);var r=b(n,p),s=b(n,q),t=b(o,p),u=b(o,q);return t>r&&s>u?(f=n,j):(f=null,0)};c.mouseleave(l).find(h.rowSelector).mouseenter(m).mouseleave(n).click(o),a(document).mousemove(k)}a.fn.menuAim=function(a){return this.each(function(){b.call(this,a)}),this}}(jQuery),a.$=$}.apply(a,arguments)})}(this),define("header/nav-dropdown",["jquery","underscore","common/config","header/analytics","common/utils/transition","common/utils/touch","common/utils/breakpoint-class-switcher","common/breakpoints","jquery.menu-aim"],function(a,b,c,d,e,f,g,h){var i=27,j=300,k=450,l=function(){this.$body=a("body"),this.$header=this.$body.find(".js-header"),this.$navMain=this.$header.find(".js-nav-main"),this.$navContainer=this.$navMain.find(".js-nav"),this.$dropdownContainer=this.$navContainer.find(".js-nav-dropdown-container"),this.$dropdownToggle=a(".js-nav-dropdown-toggle"),this.$dropdownList=this.$navContainer.find(".js-nav-dropdown"),this.$flyoutToggles=this.$navContainer.find(".js-flyout-toggle"),this.$flyoutToggleRows=this.$navContainer.find(".js-flyout-toggle-row"),this.$flyouts=this.$navContainer.find(".js-nav-flyout")};return l.prototype.init=function(){b.bindAll(this,"toggleDropdown","activateSubmenu","deactivateSubmenu","closeSubmenu","toggleNavMain"),this._addHandlers()},l.prototype._addHandlers=function(){var b=this;f.ieTouchFix(b.$dropdownContainer.add(b.$dropdownToggle).add(b.$flyoutToggles)),b.$dropdownList.menuAim({activate:b.activateSubmenu,deactivate:b.deactivateSubmenu,exitMenu:function(){return!0},rowSelector:"> li",submenuSelector:".js-flyout-toggle-row",tolerance:50,submenuDirection:b.$dropdownList.data("submenu-direction")||"right"}),b.$dropdownContainer.on("mouseleave",function(){b._checkHovers()}),b.$dropdownContainer.on("click touchstart",function(c){b._useDropdown()&&!a(c.target).is("a")&&c.stopPropagation()}),b._isGeorge()?b.$dropdownToggle.on("click touchstart",function(a){b._useDropdown()&&(a.stopPropagation(),b.toggleNavMain())}):b.$dropdownToggle.on("click touchstart",function(a){b._useDropdown()&&(a.preventDefault(),a.stopPropagation(),b.toggleDropdown())}).on("mouseenter",function(){b._useDropdown()&&b.toggleDropdown()}).on("mouseleave",function(){b._useDropdown()&&b._checkHovers()}),b.$flyoutToggles.on("click touchstart",function(c){b._useDropdown()&&!a(this).hasClass("active")&&(c.preventDefault(),b.$flyoutToggleRows.each(function(){b.deactivateSubmenu(this)}),b.activateSubmenu(a(this).parent(".js-flyout-toggle-row")))}).on("mouseleave",function(){b._useDropdown()&&b.$flyoutToggles.blur()})},l.prototype.handleEscKey=function(){this._useDropdown()&&(this.$dropdownContainer.hasClass("expanded")?this.closeSubmenu():(this.hideDropdown(),this.$dropdownToggle.focus()))},l.prototype._checkHovers=function(){if(this._useDropdown()){var a,c=this;c.$dropdownContainer.add(c.$dropdownToggle).one("mouseenter",function(){a=!0}),b.delay(function(){a||c.hideDropdown()},j)}},l.prototype.toggleDropdown=function(){this._useDropdown()&&(this.$dropdownContainer.hasClass("active")?this.hideDropdown():this.showDropdown())},l.prototype.showDropdown=function(){if(this._useDropdown()){var a=this;a.$dropdownToggle.data("LHN-analytics-tracked")||(d.LHNAnalytics(),a.$dropdownToggle.data("LHN-analytics-tracked",!0)),a.$dropdownToggle.addClass("active"),a.$dropdownContainer.addClass("display-block").attr("aria-expanded","true"),b.defer(function(){a.$dropdownContainer.addClass("active")}),a._addDocHandlers()}},l.prototype.hideDropdown=function(){this._useDropdown()&&(this.$dropdownToggle.add(this.$dropdownContainer).add(this.$flyouts).add(this.$flyoutToggles).removeClass("active expanded display-block"),this.$dropdownContainer.add(this.$flyouts).attr("aria-expanded","false"),this._removeDocHandlers())},l.prototype.activateSubmenu=function(c){if(this._useDropdown()){var e=a(c),f=e.children(".js-flyout-toggle"),g=f.data("index"),h=this._getFlyoutFromId(f.data("target-id"));h.length&&(this._isGeorge()&&(this._setFlyoutPosition(h,e),this._addDocHandlers()),f.addClass("active"),this.$dropdownContainer.addClass("expanded"),h.addClass("display-block").attr("aria-expanded","true"),this.CornerAdLazy(h),b.defer(function(){h.addClass("active")}),h.trigger("active:flyout"),f.data("SDN-analytics-tracked")||(d.SDNAnalytics(g),f.data("SDN-analytics-tracked",!0)))}},l.prototype.deactivateSubmenu=function(b){if(this._useDropdown()){var c=a(b).children(".js-flyout-toggle"),d=this._getFlyoutFromId(c.data("target-id"));this._isGeorge()&&(this._clearFlyoutPosition(d),this._removeDocHandlers()),c.add(d).removeClass("active display-block"),d.attr("aria-expanded","false"),this.$dropdownContainer.removeClass("expanded")}},l.prototype.closeSubmenu=function(){if(this._useDropdown()){var a=this.$navContainer.find(".js-flyout-toggle.active").eq(0);this.deactivateSubmenu(a.parent("li")),a.focus()}},l.prototype.CornerAdLazy=function(a){var b=a.find(".js-corner-ad img"),c=b.attr("src"),d=b.data("cornerad-img"),e=b.data("img-loaded");b.length&&e!==!0&&(b.attr("src",d),b.data("cornerad-img",c),b.data("img-loaded",!0))},l.prototype.toggleNavMain=function(){var a=this;this.$header.hasClass("fixed")&&(this.$navMain.hasClass("nav-main-expanded")?(this.$navMain.removeClass("nav-main-expanded"),e.emulateTransitionEnd(this.$navMain,k),this.$navMain.one(e.cssTransition().end,function(){a.$navMain.removeClass("nav-main-transition-top"),a.$dropdownToggle.removeClass("header-nav-toggle-expanded")})):(this.$navMain.addClass("nav-main-transition-top nav-main-expanded"),this.$dropdownToggle.addClass("header-nav-toggle-expanded")),this.$dropdownToggle.blur())},l.prototype._getFlyoutFromId=function(a){var b=this.$dropdownContainer.find("#"+a);return b},l.prototype._addDocHandlers=function(){var b=this;a(document).on("touchstart.navDropdownActive click.navDropdownActive",function(a){var c=0===b.$navContainer.find(a.target).addBack(a.target).length;c&&b.hideDropdown()}).on("keyup.navDropdownActive",function(a){a.keyCode===i&&b.handleEscKey()})},l.prototype._removeDocHandlers=function(){a(document).off(".navDropdownActive")},l.prototype._setFlyoutPosition=function(a,b){var c=this.$dropdownContainer.width(),d=a.width(),e=b.position().left+b.width()/2-a.width()/2,f=e+d;0>=e?a.css("left",0):f>c?a.css("right",0):a.css("left",e)},l.prototype._clearFlyoutPosition=function(a){a.css({left:"",right:""})},l.prototype._useDropdown=function(){return g.getCurrentBreakpoint()>=h.l},l.prototype._isGeorge=function(){return c.tenant===c.ENUMS.TENANTS.GEORGE_UK},l}),define("header/skip-links",["jquery"],function(a){var b=function(){this.$links=a(".skip")};return b.prototype.init=function(){this.$links.on("click",function(){var b="#"+this.href.split("#")[1];a(b).attr("tabindex",-1).on("blur focusout",function(){a(this).removeAttr("tabindex")}).focus()})},b}),define("hbs!common/global/header/templates/SigninModalContent",["hbs","hbs/handlebars"],function(a,b){var c=b.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="signin-flyout-modal-content js-signin-flyout-modal-content">\n  <div class="hide-content-max-m">\n    <div class="Grid Grid--gutters">\n      <div class="Grid-col u-size-1-3">\n        <div class="signin-image gicon-logo-signin-flyout"></div>\n      </div>\n      <div class="Grid-col u-size-2-3">\n        <div class="signin-text font-semibold">Sign in to see the items in your cart on all your devices!</div>\n        <a class="btn" href="https://www.walmart.com/account">Sign In Securely</a>\n      </div>\n    </div>\n    <div class="signup-text align-left">\n      <span class="font-semibold">Don\'t have an account?</span>\n      <span> All you need is an email address! </span>\n      <a href="https://www.walmart.com/account/signup">Create Account</a>\n    </div>\n  </div>\n  <div class="signin-flyout-modal-small hide-content-m">\n    <div class="signin-text font-semibold">Sign in to see the items in your cart on all your devices!</div>\n    <div class="signin-stack-middle">\n      <div class="display-inline-block-s">\n        <div class="signin-image gicon-logo-signin-flyout"></div>\n      </div>\n      <div class="display-inline-block-s signin-button-container">\n        <a class="btn btn-block-max-s" href="https://www.walmart.com/account">Sign In Securely</a>\n      </div>\n    </div>\n    <div class="signup-text align-left">\n      <span class="font-semibold">Don\'t have an account?</span>\n      <span> All you need is an email address! </span>\n      <a class="display-inline-block" href="https://www.walmart.com/account/signup">Create Account</a>\n    </div>\n  </div>\n</div>\n'},useData:!0});return b.registerPartial("common/global/header/templates/SigninModalContent",c),c}),define("common/global/header/views/login-flyout-view",["thorax","hbs!common/global/header/templates/SigninModalContent"],function(a,b){var c=a.View.extend({template:b});return c}),define("header/show-login-flyout",["underscore","jquery","backbone","common/config","common/modals/modal-view/modal-view","common/global/header/views/login-flyout-view","common/plugins/flyout"],function(a,b,c,d,e,f){var g={name:"SSOE",homePageOnly:"HP000057",campaignOff:"HP000054"},h=c.View.extend({el:".js-header-wrapper",initialize:function(){this.$headerLogin=this.$(".js-header-login"),this.$normalFlyout=this.$(".js-header-flyout"),this.$accountLoggedIn=this.$(".js-account-logged-in"),this.$accountFlyoutLoggedOut=this.$(".js-signin-flyout"),this.$closeFlyout=this.$(".js-flyout-close"),this.$isNotSessionExpired=this.$el.hasClass("current-session"),this.headerCartCount=this.$(".js-header-cart-count").text(),this._showLoginFlyout()},_showLoginFlyout:function(){this._getCookie(g.name)===g.homePageOnly&&this._isHomePage()&&!this.$isNotSessionExpired&&this._isCartNotEmpty()&&this._isNotSignedInUser()&&("MOBILE"===this.clientDeviceType()||"none"===this.$headerLogin.css("display")?this._setLoginModalVisible():this._setLoginFlyoutVisible())},_isNotSignedInUser:function(){return!this.$accountLoggedIn.hasClass("active")},_isHomePage:function(){return b(".homepage").length>0},clientDeviceType:function(){return d.device},_getCookie:function(a){return b.cookie(a)},_setLoginModalVisible:function(){this.LoginModalView=new e({name:"signin-flyout-modal-content js-signin-flyout-modal-content",padded:!0,isResponsive:!0,viewClasses:"Modal--small",topModule:new f})},_isCartNotEmpty:function(){return!("0"===this.headerCartCount||a.isEmpty(this.headerCartCount))},_setLoginFlyoutVisible:function(){var a=this;this.$accountFlyoutLoggedOut.flyout("show"),this._disableNormalFlyout(),this.$accountFlyoutLoggedOut.on("hidden",function(){a._enableNormalFlyout()}),this.$closeFlyout.on("click",function(){a._setLoginFlyoutHidden(),a._enableNormalFlyout()})},_setLoginFlyoutHidden:function(){this.$accountFlyoutLoggedOut.flyout("hide"),this._enableNormalFlyout()},_enableNormalFlyout:function(){this.$normalFlyout.flyout({hover:!0})},_disableNormalFlyout:function(){this.$normalFlyout.flyout("off")},remove:function(){this.LoginModalView&&this.LoginModalView.remove()}});return h}),define("common/store/views/store-finder-flyout-view-events",["backbone","underscore"],function(a,b){var c=b.extend({},a.Events);return c}),define("common/truncate",["underscore","jquery","common/logger","common/config"],function(a,b,c,d){function e(c,d){d=e.normalizeOptions(d,c),a.extend(this,{$element:b(c),lines:1,characters:0,disclosureArrow:!0,split:/\S+/g,text:b.trim(b(c).text()),suffix:"...",collapsed:!0},d),this.setup()}function f(b,c,d){return a.isUndefined(d)&&(d=c,c=null),a.isObject(d)?(c=a.extend({initialize:!0},c),this.view=b,this.values=d,this.setup=!1,c.initialize&&(b.on("ready",a.bind(this.up,this)).on("rendered",a.bind(this.up,this)),this.up()),void b.on("destroyed",a.bind(this.down,this))):e.error(new TypeError("Configuration must be object."))}var g=100,h="truncate-disclosure-arrow",i=window.MutationObserver||window.WebKitMutationObserver;return e.prototype.setup=function(){this.$text=this.$element.find("span").first(),this.$text.length<=0&&(this.$element.wrapInner("<span></span>"),this.$text=this.$element.children("span")),this.disclosureArrow&&(this.$disclosureArrow=b("<div class='"+h+"'></div>").on("click",a.bind(function(a){a.preventDefault(),this.toggle()},this)),this.$text.after(this.$disclosureArrow)),this.watch(),this.truncate()},e.prototype.teardown=function(){this.discloureArrow&&this.$disclosureArrow.remove(),this.unwatch()},e.prototype.toggle=function(b){a.isUndefined(b)&&(b=this.isCollapsed()),b?this.expand():this.collapse()},e.prototype.isCollapsed=function(){return this.collapsed},e.prototype.collapse=function(){this.collapsed=!0,this.truncate()},e.prototype.expand=function(){this.collapsed=!1,this.truncate()},e.setup=function(a,b,c){return new f(a,b,c)},e.prototype.getMaximumHeight=function(){return this.lines>0?e.getLineHeight(this.$text)*this.lines:0},e.prototype.syncState=function(){function b(a){for(var b="",c=0;c<j.length&&a>0;++c)b+=j[c].value,"word"===j[c].type&&--a;return b}function c(){return h&&f.height()>h}function d(){return g&&i.length>g}if(this.$element.is(":visible")&&!this._sync){this._sync=!0,this.$element.removeClass("truncated expanded");var f=this.$text,g=this.characters,h=this.getMaximumHeight(),i=this.text,j=e.parts(this.split,this.text),k=a.where(j,{type:"word"}).length;for(this.$element.addClass("expanded");k>0&&(c()||d());)i=b(--k),f.text(i+this.suffix);this.$element.removeClass("expanded"),this._length=b(k).length,this.collapsed?this.text.length>this._length&&(this.$text.text(this.text.substr(0,this._length)+this.suffix),this.$element.addClass("truncated")):(this.$element.addClass("expanded"),this.$text.text(this.text)),this._width=f.width(),this._height=f.height(),this._collapsed=this.collapsed;var l=this;setTimeout(function(){l._sync=!1},200)}},e.getLineHeight=function(a){var c,d,e=b(a),f=b(a).text();return c=e.text("i").height(),d=e.css("line-height"),e.text(f),"normal"===d||0===parseFloat(d)||parseFloat(c)>parseFloat(d)?c:parseFloat(d)},e.prototype.isStale=function(){return this._height!==(this.$text.height()||0)||this._width!==(this.$text.width()||0)||this._collapsed!==this.collapsed},e.prototype.truncate=function(){this.isStale()&&this.syncState()},e.prototype.watch=function(){if(!this.observer){var b=a.bind(this.truncate,this),c=this.$element.parents().addBack();if(a.isUndefined(i))this.observer=setInterval(b,250);else{var d=new i(b);c.each(function(){d.observe(this,{attributes:!0,attributeFilter:["style","class"]})}),this.observer=d}}},e.prototype.unwatch=function(){this.observer&&(a.isUndefined(i)?clearInterval(this.observer):this.observer.disconnect(),this.observer=null)},e.parts=function(a,b){for(var c,d=[],e=0,f=0;null!==(c=a.exec(b));)e<c.index&&d.push({type:"whitespace",value:b.substring(e,c.index)}),d.push({type:"word",value:c[0],word:++f}),e=a.lastIndex;return e<b.length&&d.push({type:"whitespace",value:b.substring(e)}),d},e.normalizeOptions=function(b,c){return a.isNumber(b)?{characters:b}:a.isBoolean(b)?{}:a.isFunction(b)?b(c):b
},e.get=function(c,d){return a.chain(d).map(function(d,f){return a.map(c.$(f),function(a){var c=b(a);return c.data("__truncate")?c.data("__truncate"):(c.data("__truncate",new e(a,d)),c.data("__truncate"))})}).flatten(!0).value()},e.error=function(a){if(e.strict)throw a;return c.log.error(a),a},e._getWindow=function(){return window},e.strict=d.environment===d.ENUMS.ENVS.TEST,f.prototype.refresh=a.throttle(function(){a.each(this.truncates,function(a){a.truncate()})},g),f.prototype.up=function(){var a=b(e._getWindow());this.setup||(a.on("resize",this.refresh),this.setup=!0),this.truncates=e.get(this.view,this.values),this.refresh()},f.prototype.down=function(){var c=b(e._getWindow());this.setup&&(a.each(this.truncates,function(a){a.teardown()}),this.truncates=null,c.off("resize",this.refresh),this.setup=!1)},e}),define("hbs!common/store/templates/store",["hbs","hbs/handlebars"],function(a,b){var c=b.template({1:function(){return"/static/img/store/preferred-store-star.svg"},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'      <span class="pull-right">'+h((e=null!=(e=b.distance||(null!=a?a.distance:a))?e:g,typeof e===f?e.call(a,{name:"distance",hash:{},data:d}):e))+" mi</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g,h=b.helperMissing,i=this.escapeExpression,j="function",k=b.blockHelperMissing,l=this.lambda,m="<li>\n  <a href="+i((b.completeUrl||a&&a.completeUrl||h).call(a,"/store/",{name:"completeUrl",hash:{hostName:(e=d&&d.root)&&e.hostName,thirdParty:(e=d&&d.root)&&e.thirdParty},data:d}))+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===j?f.call(a,{name:"id",hash:{},data:d}):f))+'>\n    <span class="js-preferred-store-mark sf-flyout-preferred-store-mark" data-mark-id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===j?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n      <img alt="preferred store" src="';return f=null!=(f=b.asset||(null!=a?a.asset:a))?f:h,g={name:"asset",hash:{},fn:this.program(1,d),inverse:this.noop,data:d},e=typeof f===j?f.call(a,g):f,b.asset||(e=k.call(a,e,g)),null!=e&&(m+=e),m+='" />\n    </span>\n    '+i(l(null!=(e=null!=a?a.address:a)?e.city:e,a))+'\n  </a>\n  <div class="copy-small clearfix">\n    <div class="js-store-flyout-address">\n      <span class="pull-left">'+i(l(null!=(e=null!=a?a.address:a)?e.address1:e,a))+"</span>\n    </div>\n",e=b["if"].call(a,null!=a?a.distance:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(m+=e),m+"  </div>\n</li>\n"},useData:!0});return b.registerPartial("common/store/templates/store",c),b.registerPartial("common/store/templates/store",c),c}),define("hbs!common/store/templates/flyout",["hbs","hbs/handlebars","hbs!common/store/templates/store"],function(a,b){var c=b.template({1:function(a,b,c,d){var e,f='  <p class="heading-c header-flyout-heading">\n    Your preferred store\n  </p>\n  <ul class="sf-flyout-store-list sf-flyout-preferred-stores">\n';return e=b.each.call(a,null!=a?a.preferredStores:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"  </ul>\n"},2:function(a,b,c,d){var e,f="";return e=this.invokePartial(c["common/store/templates/store"],"      ","common/store/templates/store",a,void 0,b,c,d),null!=e&&(f+=e),f},4:function(a,b,c,d){var e,f='  <p class="heading-c header-flyout-heading">\n';return e=b["if"].call(a,null!=a?a.hasPreferredStores:a,{name:"if",hash:{},fn:this.program(5,d),inverse:this.program(10,d),data:d}),null!=e&&(f+=e),f+='  </p>\n  <ul class="sf-flyout-store-list">\n',e=b.each.call(a,null!=a?a.nearbyStores:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"  </ul>\n"},5:function(a,b,c,d){var e,f="      Other stores near ";return e=b["if"].call(a,null!=a?a.location:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f+"\n"},6:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return h((e=null!=(e=b.location||(null!=a?a.location:a))?e:g,typeof e===f?e.call(a,{name:"location",hash:{},data:d}):e))},8:function(){return"you"},10:function(a,b,c,d){var e,f="      Stores near ";return e=b["if"].call(a,null!=a?a.location:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f+"\n"},12:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h="function";return"  <a href="+g((b.completeUrl||a&&a.completeUrl||f).call(a,"/store",{name:"completeUrl",hash:{hostName:null!=a?a.hostName:a,thirdParty:null!=a?a.thirdParty:a},data:d}))+"/finder?location="+g((e=null!=(e=b.location||(null!=a?a.location:a))?e:f,typeof e===h?e.call(a,{name:"location",hash:{},data:d}):e))+' class="sf-copy-small">See more nearby stores</a>\n'},14:function(a,b,c,d){var e,f="";return e=b["if"].call(a,null!=a?a.hasGeolocation:a,{name:"if",hash:{},fn:this.program(15,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f},15:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h=this.lambda;return"    <a href="+g((b.completeUrl||a&&a.completeUrl||f).call(a,"/store",{name:"completeUrl",hash:{hostName:null!=a?a.hostName:a,thirdParty:null!=a?a.thirdParty:a},data:d}))+"/finder?latitude="+g(h(null!=(e=null!=a?a.geolocation:a)?e.latitude:e,a))+"&longitude="+g(h(null!=(e=null!=a?a.geolocation:a)?e.longitude:e,a))+' class="sf-copy-small">See more nearby stores</a>\n'},17:function(){return"another"},19:function(){return"a"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h="";return e=b["if"].call(a,null!=a?a.hasPreferredStores:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+="\n",e=b["if"].call(a,null!=a?a.hasNearbyStores:a,{name:"if",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+="\n",e=b["if"].call(a,null!=a?a.location:a,{name:"if",hash:{},fn:this.program(12,d),inverse:this.program(14,d),data:d}),null!=e&&(h+=e),h+='\n<p class="heading-c header-flyout-heading">Find ',e=b["if"].call(a,null!=a?a.hasResults:a,{name:"if",hash:{},fn:this.program(17,d),inverse:this.program(19,d),data:d}),null!=e&&(h+=e),h+' store</p>\n\n<form class="js-sf-flyout-form header-flyout-form"\n  action='+g((b.completeUrl||a&&a.completeUrl||f).call(a,"/store/finder",{name:"completeUrl",hash:{hostName:null!=a?a.hostName:a,thirdParty:null!=a?a.thirdParty:a},data:d}))+'>\n\n  <div class="arrange form-arrange form-arrange-compact">\n    <div class="arrange-fill">\n      <div class="validation-group">\n        <label>\n          <span class="visuallyhidden">Enter city, state or zip code</span>\n          <input id="flyout-enter-zip-input"\n            type="text" name="location"\n            class="js-sf-error form-control js-instant-placeholder js-persist-header"\n            placeholder="Enter city, state or zip code">\n        </label>\n\n        <i class="js-sf-error-hide validation-marker validation-marker-error visuallyhidden">\n          <span class="visuallyhidden">Invalid city, state or zip code</span>\n        </i>\n      </div>\n    </div>\n\n    <div class="arrange-fit">\n      <button class="btn btn-compact" type="submit">Find</button>\n    </div>\n  </div>\n\n  <p class="js-sf-error-hide error-label visuallyhidden">Please enter a valid city, state or zip code</p>\n</form>\n'},usePartial:!0,useData:!0});return b.registerPartial("common/store/templates/flyout",c),c}),define("common/store/views/store-finder-flyout-view",["backbone","jquery","common/validators","common/utils/geolocate","common/utils/object","common/store/views/store-finder-flyout-view-events","common/truncate","common/helpers/third-party","hbs!common/store/templates/flyout"],function(a,b,c,d,e,f,g,h,i){var j=35,k=a.View.extend({initialize:function(a){a=a||{},this.$header=b(".js-header"),this.listenTo(f,"change",this.load),g.setup(this,{".js-store-flyout-address":j})},events:{"submit .js-sf-flyout-form":"_onSubmit","focus .js-persist-header":"_onFocus","blur .js-persist-header":"_onLoseFocus"},_invalidLocation:function(a){return!a||!c.userLocation.validate(a)},_onSubmit:function(a){var b=this.$(a.target).find("input[name=location]").val();return this._invalidLocation(b)?(a.preventDefault(),this._onFail()):this._onSuccess()},_onFocus:function(){this.$header.data("disableSticky",!0)},_onLoseFocus:function(){this.$header.data("disableSticky",null),this.$header.trigger("scroll.sticky")},_onSuccess:function(){return this.$(".js-sf-error").removeClass("error"),this.$(".js-sf-error-hide").addClass("visuallyhidden"),!0},_onFail:function(){return this.$(".js-sf-error").addClass("error"),this.$(".js-sf-error-hide").removeClass("visuallyhidden"),!1},getFlyoutData:function(b,c){var d={hash:{thirdParty:this._getWindow()._WML.IS_THIRDPARTY,hostName:this._getWindow()._WML.HOST_NAME}};a.ajax({type:"GET",url:h.completeUrl("/store/ajax/preferred-flyout",d),dataType:"jsonp",data:b,cache:!1,success:function(a){a&&c(null,a)},error:function(){c(new Error("Problem getting flyout"))}})},_setThirdPartyData:function(a){a.thirdParty=this._getWindow()._WML.IS_THIRDPARTY,a.hostName=this._getWindow()._WML.HOST_NAME},_formatPosition:function(a){var b=e.traverse("coords.latitude",a),c=e.traverse("coords.longitude",a);return b&&c?{latitude:b,longitude:c}:null},_getWindow:function(){return window},load:function(){var a=this;a.getFlyoutData(null,function(b,c){return b||c.isDisabled?void 0:c.hasResults?(a._setThirdPartyData(c),void a.render(c)):void d.getCurrentLocation(function(b,c){b||a.getFlyoutData(a._formatPosition(c),function(b,c){b||c.hasResults&&(a._setThirdPartyData(c),a.render(c))})})})},render:function(a){return this.$el.html(i(a)).find(".js-instant-placeholder").placeholder(),this}});return k}),define("common/store/store-finder-flyout",["common/store/views/store-finder-flyout-view"],function(a){return{init:function(){var b=new a({el:".js-sf-header-flyout-modal"});b.load()}}}),define("header/header-init-desktop",["jquery","header/header-account","header/header-dropdown","header/header-sticky","header/header-logo-shipping-pass","header/nav-dropdown","header/skip-links","header/show-login-flyout","common/store/store-finder-flyout","common/plugins/flyout"],function(a,b,c,d,e,f,g,h,i){var j={init:function(){var j=new g,k=new f;j.init(),new b,new c,new d,e.init(),k.init(),a(".js-header-flyout").flyout({hover:!0,disableTouchLinksOnly:!0}),new h,a(".js-header-store-finder-flyout").flyout({hover:!0,disableTouchLinksOnly:!0,adaptTextAutoComplete:!0}),a(".js-header-store-finder-flyout").one("shown",function(){i.init()})}};return j}),define("common/wmx/analytics",["jquery","underscore","thorax","common/utils/object"],function(a,b,c,d){var e=c.View.extend({template:function(){},assetViewabilityTimeout:1e3,nativeAdsContext:"NativeAds",carouselContext:"Carousel_",viewedAction:"IN_VIEW",clickedAction:"ON_LINK",paginationAction:"ON_PAGINATION",viewedReportingId:"ads.nat.vww.mod",clickedReportingId:"nav.unv.slc.clc",paginationReportingId:"dis.pag.slc.clc",paginationTypes:["dot","previousArrow","nextArrow","button"],viewHistory:[],clickHistory:[],trackTempoModule:function(c){var d=this,e=a(c),f=e.data("module"),g=e.data("module-id"),h={id:g,ty:f},i=e.closest(".zone").data("zone");switch(b.isUndefined(i)||b.isNull(i)||(h.zn=i),f){case"GlobalLefthandNav":d._leftNav(e,h);break;case"SingleStoryPOVResponsive":d._singlePov(e,h);break;case"MultiStoryPOVResponsive":d._multiPov(e,h);break;case"MiniStoryStackable":d._miniStoryStackable(e,h);break;case"CustomHTML":d._customHTML(e,h);break;case"P13NBadge":d._itemBadge(e,h);break;case"ItemCarouselCurated":case"SingleItem":case"CategoryCarouselCurated":d._setupItemCarouselListners(e,h);break;case"FeaturedCategoriesCurated":d._featuredCategories(e,h)}},_itemBadge:function(b,c){var d=this,e={},f=b.find(".js-product-item-badge-anchor");e.ai=f.data("asset-id"),e.uid=f.data("uid"),d._trackAssetViewed(c,e,b),a(d._getWindow()).off("scroll.wmx.itemBadge").on("scroll.wmx.itemBadge",function(){d._trackAssetViewed(c,e,b)}),b.find("img").on("click",function(f){var g=b.find(".js-product-item-badge-anchor").attr("href");d._trackAssetClicked(c,e,g,a(f.currentTarget).get(0))})},_leftNav:function(c,d){var e=this,f=".js-nav-dropdown .js-flyout-toggle-row > .js-nav-flyout",g=c.find(f);g.on("active:flyout",function(c){var f=a(c.target).find(".js-corner-ad a"),g=f.data("asset-id"),h={ai:g};b.isUndefined(g)||b.isNull(g)||e._trackAssetViewed(d,h,f.find("img"))}),g.find(".js-corner-ad img").on("click",function(c){var f=a(c.target).closest("a"),g=f.data("asset-id"),h={ai:g},i=a(c.target).closest("a, area").attr("href");b.isUndefined(g)||b.isNull(g)||e._trackAssetClicked(d,h,i,a(c.currentTarget).get(0))})},_singlePov:function(b,c){var e=this,f=b.data("asset-id"),g=b.data("uid"),h={ai:f,uid:g};e._trackAssetViewed(c,d.deepClone(h),b),a(e._getWindow()).off("scroll.wmx.singlePov").on("scroll.wmx.singlePov",function(){e._trackAssetViewed(c,d.deepClone(h),b)}),e._addImageMapClickHandler(b,c,d.deepClone(h))},_multiPov:function(b,c){var d=this,e=b.find("li.selected"),f=e.find("a, area").data("asset-id"),g=e.find("a, area").data("uid"),h={ai:f,uid:g};d._trackAssetViewed(c,h,e),d._addImageMapClickHandler(e.find("li a, map"),c,h),b.on("selected",function(){var a=b.find(".js-carousel-items li.selected"),e=a.find("a, area").data("asset-id"),f=a.find("a, area").data("uid"),g={ai:e,uid:f};d._trackAssetViewed(c,g,a),d._addImageMapClickHandler(b.find("li a, map"),c,g)}),a(d._getWindow()).off("scroll.wmx.multiPov").on("scroll.wmx.multiPov",function(){var a=b.find(".js-carousel-items li.selected"),e=a.find("a, area").data("asset-id"),f=a.find("a, area").data("uid"),g={ai:e,uid:f};d._trackAssetViewed(c,g,a)})},_miniStoryStackable:function(b,c){var d=this,e=b.find(".js-ministory-spot"),f=[];e.each(function(){var b=a(this).find("a"),e=b.data("asset-id"),g=b.data("uid"),h={ai:e,uid:g};f.push({ai:e,uid:g}),d._addImageMapClickHandler(b,c,h)}),d._trackBatchedAssetViewed(c,f,b.find(".js-ministory-spot").first()),a(d._getWindow()).off("scroll.wmx.miniStoryStackable").on("scroll.wmx.miniStoryStackable",function(){e.find("img").each(function(){var b=a(this).closest("a"),e=b.data("asset-id"),f=b.data("uid"),g={ai:e,uid:f};d._trackAssetViewed(c,g,a(this))})})},_customHTML:function(c,d){var e=this,f=c.find("iframe"),g=f.contents();g.find("img").each(function(){var c=a(this).closest("a"),f=c.data("asset-id"),g={ai:f};b.isUndefined(f)||b.isNull(f)||(e._addImageMapClickHandler(c,d,g),e._trackAssetViewed(d,g,a(this)))}),a(e._getWindow()).off("scroll.wmx.customHtml").on("scroll.wmx.customHtml",function(){g.find("img").each(function(){var c=a(this).closest("a"),f=c.data("asset-id"),g={ai:f};b.isUndefined(f)||b.isNull(f)||e._trackAssetViewed(d,g,a(this))})})},_featuredCategories:function(b,c){var d,e=this,f={},g=b.children().find(".js-featured-more-toggle-btn"),h=g.parent();h.hasClass("expanded")||g.off("click.featuredCategories").on("click.featuredCategories",function(b){f={nm:"button"},d="FeaturedCategories",e._clickTrackEachTime(c,f,"",a(b.currentTarget).get(0))})},_setupItemCarouselListners:function(b,c){var d=this,e={},f="";b.on("click",".js-carousel-paginator-list li",function(b){e={nm:"dot"},d._clickTrackEachTime(c,e,f,a(b.currentTarget).get(0))}),b.on("click",".js-paginator-btn",function(b){var g=a(b.target);e=g.hasClass("js-paginator-btn-prev")?{nm:"previousArrow"}:{nm:"nextArrow"},d._clickTrackEachTime(c,e,f,a(b.currentTarget).get(0))})},_addImageMapClickHandler:function(b,c,d){var e=this;b.on("click.wmx",function(b){var f=a(b.target).closest("li a, area").attr("href");e._trackAssetClicked(c,d,f,a(b.currentTarget).get(0))})},_trackAssetClicked:function(a,b,c,d){this._clickTrack(a,b,c,d)},_trackAssetViewed:function(a,b,c){var d=this,e=d._inView(c),f="v";setTimeout(function(){var g=e&&d._inView(c),h="MiniStoryStackable"===a.ty;b[f]=g,(g||!h)&&d._viewTrack(a,b)},d.assetViewabilityTimeout)},_trackBatchedAssetViewed:function(a,b,c){var d=this,e=d._inView(c),f="v";setTimeout(function(){var g=e&&d._inView(c);d._setAllKeys(b,f,g),d._viewTrack(a,{batch:b})},d.assetViewabilityTimeout)},_clickTrack:function(a,b,c,d){this._checkDuplicate(this.clickHistory,{co:a,li:b})||(this.clickHistory.push({co:a,li:b}),this._clickTrackEachTime(a,b,c,d))},_clickTrackEachTime:function(a,c,d,e){var f=this.nativeAdsContext,g=this.clickedAction,h=this.clickedReportingId,i=[["co",a],["li",c]];b.contains(this.paginationTypes,c.nm)&&(f=this.carouselContext+a.zn.substring(4),g=this.paginationAction,h=this.paginationReportingId,i=[["li",c]]),this._getBcq().push(["_tagAction",f,g,h,i,d,e])},_viewTrack:function(a,b){this._checkDuplicate(this.viewHistory,{co:a,li:b})||(this.viewHistory.push({co:a,li:b}),this._getBcq().push(["_tagAction",this.nativeAdsContext,this.viewedAction,this.viewedReportingId,[["co",a],["li",b]]]))},_checkDuplicate:function(a,c){return b.any(a,function(a){return b.isEqual(a,c)})},_setAllKeys:function(a,c,d){b.each(a,function(a){a[c]=d})},_inView:function(b){if(!b||!b.offset())return!1;var c=b.offset().top+b.height()/2;return c>=a(this._getWindow()).scrollTop()&&c<=a(this._getWindow()).scrollTop()+a(this._getWindow()).height()},_getBcq:function(){return _bcq},_getWindow:function(){return window},_clearStorage:function(){this.viewHistory=[],this.clickHistory=[]},_removeEventListeners:function(){a(this._getWindow()).off("click.wmx"),a(this._getWindow()).off("scroll.wmx")}});return new e}),define("header/header-deferred",["jquery","header/header-init-desktop","common/utils/environment","common/wmx/analytics","common/helpers/third-party"],function(a,b,c,d){c.entryPoint(function(){a(function(){b.init(),d.trackTempoModule(".js-global-lefthand-nav")})})});
//# sourceMappingURL=http://dev.walmart.com:9873/js-dist-atlas/header/header-deferred.map